name: 🤝 Welcome New Contributors

on:
  issues:
    types: [opened]
  pull_request_target:
    types: [opened]

permissions:
  issues: write
  pull-requests: write
  contents: read

jobs:
  welcome:
    name: 🎉 Welcome Contributors
    runs-on: ubuntu-latest
    if: github.event_name == 'issues' || github.event_name == 'pull_request_target'
    
    steps:
    - name: 🤝 Welcome Message
      uses: actions/github-script@v7
      with:
        script: |
          let message = '';
          
          if (context.eventName === 'issues') {
            const creator = context.payload.issue.user.login;
            message = `🎉 **Welcome to Portfolio v2.0!** 

            Thank you @${creator} for opening this issue! We appreciate your contribution to the project.
            
            ## 📋 What's next?
            - Our maintainers will review your issue soon
            - Feel free to add more details if needed
            - Check out our documentation for more info
            
            Thanks for being part of our community! 🚀`;
            
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.payload.issue.number,
              body: message
            });
          } 
          
          if (context.eventName === 'pull_request_target') {
            const contributor = context.payload.pull_request.user.login;
            message = `🎉 **Thank you for your contribution!** 

            Hello @${contributor}! Thanks for submitting this pull request to Portfolio v2.0! 🚀
            
            ## 🔍 What happens next?
            - Our CI checks will run automatically
            - A maintainer will review your changes
            - We'll provide feedback if needed
            
            Thanks for helping improve the project! 🎯`;
            
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.payload.pull_request.number,
              body: message
            });
          }